<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suspended - ChatFun</title>
    <link rel="icon" type="image/svg+xml" href="images/logo.svg">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/suspension.css">
    <script src="https://kit.fontawesome.com/ac9ab6562b.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Intel+One+Mono:ital,wght@0,300..700;1,300..700&display=swap" rel="stylesheet">
  </head>

  <body>
    <div class="container">
      <div class="header">
        <div class="logo-container">
          <i class="fa-solid fa-message"></i>
          <h1>chatfun</h1>
        </div>
        <p class="suspension-message"><i class="fas fa-ban"></i> you have been suspended</p>
      </div>

      <div class="suspension-info">
        <div class="countdown-container">
          <p>time remaining:</p>
          <div class="countdown" id="countdown">calculating...</div>
        </div>

        <div class="reason">
          <p>please review our community guidelines and return when your suspension is lifted.</p>
        </div>
      </div>

      <div class="redirect-info">
        <p>you will be automatically redirected when your suspension expires</p>
      </div>
    </div>

    <script>
      // Get the expires timestamp from URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      const expiresTimestamp = urlParams.get('expires');

      if (!expiresTimestamp) {
        document.getElementById('countdown').textContent = 'invalid suspension data';
      } else {
        const expiresDate = new Date(parseInt(expiresTimestamp) * 1000);

        function updateCountdown() {
          const now = new Date();
          const timeLeft = expiresDate - now;

          if (timeLeft <= 0) {
            // Suspension expired, redirect to app
            window.location.href = 'app.html';
            return;
          }

          const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
          const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

          let countdownText = '';
          if (days > 0) {
            countdownText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
          } else if (hours > 0) {
            countdownText = `${hours}h ${minutes}m ${seconds}s`;
          } else if (minutes > 0) {
            countdownText = `${minutes}m ${seconds}s`;
          } else {
            countdownText = `${seconds}s`;
          }

          document.getElementById('countdown').textContent = countdownText;
        }

        // Update countdown immediately and then every second
        updateCountdown();
        setInterval(updateCountdown, 1000);
      }
    </script>
  </body>

</html>